# Understanding the JVM
## Advanced Features and Best Practices

从概念上介绍Java虚拟机内存的各个区域:<br/>
**目标** <br/>
明白虚拟机的内存是如何划分的,那部分区域,什么样的代码和操作可能导致内存溢出异常。
- 程序计数器
```
    程序计数器是一块较小的内存空间，它可以看作是当前线程所执行的字节码的行号指示器。在虚拟机的概念模型里(仅是概念模型，
各种虚拟机可能会通过一些更高效的方式去实现)，字节码解释器工作时就是通过改变这个计数器的值来选取下一条需要执行的字节码指令，
分支，循环，跳转，异常处理，线程恢复等基础功能都需要依赖这个计数器来完成。
    由于Java虚拟机的多线程是通过线程轮流切换并分配处理器执行时间的方式来实现的，在任何一个确定的时刻，一个处理器(对于多
核处理器来说是一个内核)都只会执行一条线程中的指令。因此，为了线程切换后能恢复到正确的执行位置，每条线程都需要有一个独立的
程序计数器，各条线程之间计数器互不影响，独立存储，我们称这类内存区域为"线程私有"的内存。
    如果线程正在执行的是一个Java方法，这个计数器记录的是正在执行的虚拟机字节码指令的地址;如果正在执行的是Native方法，这个
计数器值则为空。此内存区域是唯一一个在Java虚拟机规范中没有规定任何OutOfMemoryError情况的区域。
```
- JAVA虚拟机栈
```
    与程序计数器一样，Java虚拟机栈也是线程私有的，它的生命周期与线程相同。虚拟机栈描述的是Java方法执行的内存模型:每个方法
在执行的同时都会创建一个栈帧用于存储局部变量表，操作数栈，动态链接，方法出口等信息。每个方法从调用直至执行完成的过程，就
对应着一个栈帧在虚拟机栈中入栈到出栈的过程。
    经常有人把Java内存区分为堆内存和栈内存，这种分法比较粗糙，Java内存区域的划分实际上远比这复杂。这种划分方式的流行只能
说明大多数程序员最关注的，与对象内存分配关系最密切的内存区域是这2块。而所指的"栈"就是现在讲的虚拟机栈，或者说是虚拟机栈
中局部变量表部分。
    局部变量表存放了编译
```
- 本地方法栈
- JAVA堆
- 方法区
- 运行时常量池
- 直接内存 
